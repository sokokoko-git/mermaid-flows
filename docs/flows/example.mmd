flowchart LR
  %% GitHub friendly: avoid nested [] and use <br/> for line breaks

  A[Pre-assembly Stock<br/>Max:160] --> B(Assembly)
  B --> C[Post-assembly Stock<br/>Max:9]

  %% Added cleaning after post-assembly stock
  C --> C1(Cleaning)
  C1 --> D{Dimension Inspection}

  D -->|OK| E{Appearance Inspection}
  D -->|NG| D1[Dimension Rework]
  %% Reworked items return to post-assembly stock
  D1 --> C

  E -->|OK| F(Cleaning)
  E -->|NG| E1[Appearance Rework]
  %% Reworked items return to post-assembly stock
  E1 --> C

  F --> G[Cleaned Stock<br/>Max:1]

  %% Added photo-taking process (special case) after cleaned stock
  G --> G1["Photo Taking<br/>(Under Test)"]
  G1 --> H(Packing<br/>5 Chairs/Box)

  H --> I[Packing In-progress Stock<br/>Max:5]
  I --> J[Packed Stock]

  %% Style definitions
  classDef store fill:#f6f6f6,stroke:#888,stroke-width:1px;
  classDef proc fill:#e8f4ff,stroke:#268bd2,stroke-width:1.5px;
  classDef gate fill:#fffbe6,stroke:#b58900,stroke-width:1.5px;
  classDef fix fill:#fff0f0,stroke:#dc322f,stroke-width:1.5px,stroke-dasharray:3 2;
  classDef special fill:#e0ffe0,stroke:#2aa198,stroke-width:1.5px,stroke-dasharray:5 3;

  class A,C,G,I,J store;
  class B,C1,F,H proc;
  class D,E gate;
  class D1,E1 fix;
  class G1 special;
